{% extends 'blank.html' %}
{% load static %}
{% block content %}

{% include 'banner.html' with page_title="Checkout" %}

<div class="container-fluid py-5">
    <div class="container py-5">

        <div class="row g-5">

            <!-- LEFT SIDE: Billing Details -->
            <div class="col-lg-7">
                <div class="border rounded p-4 bg-light">
                    <h4 class="mb-4">Billing Details</h4>

                    <form method="POST">
                        {% csrf_token %}

                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label">Full Name</label>
                                <input type="text" name="fullname" class="form-control" required>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Phone</label>
                                <input type="text" name="phone" class="form-control" required>
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Email</label>
                                <input type="email" name="email" class="form-control">
                            </div>

                            <div class="col-md-6">
                                <label class="form-label">Pincode</label>
                                <input type="text" name="pincode" class="form-control" required>
                            </div>

                            <div class="col-12">
                                <label class="form-label">Delivery Address</label>
                                <textarea name="address" rows="3" class="form-control" required></textarea>
                            </div>
                        </div>

                        <hr class="my-4">

                        <!-- PAYMENT METHODS -->
                        <h5 class="mb-3">Payment Method</h5>

                        <div class="form-check mb-2">
                            <input class="form-check-input" type="radio" name="payment_method" value="COD" checked>
                            <label class="form-check-label">Cash On Delivery</label>
                        </div>

                        

                        <div class="form-check mb-3">
                            <input class="form-check-input" type="radio" name="payment_method" value="CARD">
                            <label class="form-check-label">Debit / Credit Card</label>
                        </div>

                        <button type="submit" class="btn btn-primary w-100 mt-3">
                            Place Order
                        </button>

                    </form>
                </div>
            </div>

            <!-- RIGHT SIDE: Order Summary -->
            <div class="col-lg-5">
                <div class="border rounded p-4 bg-white">
                    <h4 class="mb-4">Your Order</h4>

                    {% if order and order.added_items.all %}
                        <ul class="list-group mb-3">

                            {% for item in order.added_items.all %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <div>
                                    <strong>{{ item.product.name }}</strong><br>
                                    Qty: {{ item.quantity }}
                                </div>
                                <span>₹{{ item.total_price }}</span>
                            </li>
                            {% endfor %}

                            <li class="list-group-item d-flex justify-content-between">
                                <span>Subtotal</span>
                                <strong>₹{{ subtotal }}</strong>
                            </li>

                            <li class="list-group-item d-flex justify-content-between">
                                <span>Shipping</span>
                                <strong>₹{{ shipping }}</strong>
                            </li>

                            <li class="list-group-item d-flex justify-content-between fs-5">
                                <span>Total</span>
                                <strong>₹{{ total }}</strong>
                            </li>

                        </ul>

                    {% else %}
                        <p>Your cart is empty</p>
                    {% endif %}
                </div>
            </div>

        </div>

    </div>
</div>

{% endblock %}
